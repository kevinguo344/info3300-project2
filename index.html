<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.7.4/d3.js"></script>
</head>
<body>
<script type="text/javascript">
	var results = [];
	var startURL = "http://pitchfork.com/api/v1/albumreviews/?limit=50&offset=0";

	function callAPI(route) {
		d3.json(route, function(data) {
			nextURL = data.next;
			d.forEach(function (element) {
				var thisOne = {
					id: element.id,
					genres: element.genres,
					title: element.tombstone.albums[0].album.display_name,
					artists: element.artists,
					rating: element.tombstone.albums[0].rating.display_rating,
					bestNewMusic: element.tombstone.bnm,
					bestNewReissue: element.tombstone.bnr,
					published: element.timestamp,
					releaseYear: element.tombstone.albums[0].labels_and_years[0].year,
				};
				results.push(thisOne);
			});
			return nextURL;
		});
	}
	callAPI(startURL);

	function parseJSON(d) {
	}
</script>
</body>
</html>